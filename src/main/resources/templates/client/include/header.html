<section id="header" th:fragment="header" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
  <div class="container">
    <div class="row">
      <div class="col-lg-3">
        <a th:href="@{/DahitaBook}">
          <img th:src="@{/resources/images/frontend/logo2.png}" alt="Dahitabook" class="img-fluid">
        </a>
      </div>
      <div class="col-lg-6">
        <div class="row search-container">
          <div class="col-10">
            <input required type="text" class="input-search" th:placeholder="#{header.textsearch}" aria-label="Recipient's username" aria-describedby="button-addon2">
            <div class="smart-search-wrapper ajaxSearchResults" id="ajaxSearchResults-3">
              <div class="resultsContent"></div>
            </div>
          </div>
          <div class="col-2">
            <button class="button" type="button" id="button-addon2" th:text="#{header.buttonsearch}">Tìm kiếm</button>
          </div>
        </div>
      </div>
      <div class="col-lg-3">
        <div class="row">
          <div class="col-4" style="margin-left: 10px">
            <select class="form-select language-select" onchange="changeLanguage(this.value)" aria-label="Language selection">
              <option value="en" th:selected="${#locale.language == 'en'}" th:text="#{header.english}">English</option>
              <option value="vi" th:selected="${#locale.language == 'vi'}" th:text="#{header.vietnamese}">Tiếng Việt</option>
              <option value="zh" th:selected="${#locale.language == 'zh'}" th:text="#{header.chinese}">中文</option>
              <option value="ja" th:selected="${#locale.language == 'ja'}" th:text="#{header.japanese}">日本語</option>
            </select>
          </div>
          <div class="col d-flex justify-content-center align-items-center">
            <a th:href="@{/client/cart}" class="position-relative">
              <span style="font-size: 23px; color: rgb(255, 123, 0);"><i class="fa-solid fa-cart-shopping"></i></span>
              <span style="font-size: 10px;" class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
                    th:text="${totalUniqueQuantity != null ? totalUniqueQuantity : 0}" id="cartBadge">0</span>
            </a>
          </div>
          <div class="col-4" sec:authorize="isAuthenticated()">
            <a class="dropdown-toggle" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-user-circle" style="font-size: 27px; color: rgb(255, 123, 0);"></i>
            </a>
            <ul class="dropdown-menu" aria-labelledby="userDropdown">
              <li><a class="dropdown-item" th:href="@{/client/profile}" th:text="#{header.profile}">Xem thông tin</a></li>
              <li><a class="dropdown-item" th:href="@{/client/logout}" th:text="#{header.dangxuat}">Đăng Xuất</a></li>
            </ul>
          </div>
          <div class="col-4" sec:authorize="isAnonymous()">
            <a style="font-size: 14px; color: #ffffff" th:href="@{/client/login}" th:text="#{header.dangnhap}">Đăng Nhập</a>
          </div>
        </div>
      </div>
    </div>
  </div>
  <script>
    function changeLanguage(lang) {
      const url = new URL(window.location.href);
      url.searchParams.set('lang', lang);
      window.location.href = url.toString();
    }
  </script>
</section>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Noto+Serif+JP&family=Noto+Serif+SC&display=swap');

  .language-select {
    padding: 8px 12px;
    font-size: 14px;
    border-radius: 5px;
    border: 1px solid #ccc;
    background-color: #fff;
    color: #333;
    width: 100%;
    transition: border-color 0.3s, box-shadow 0.3s;
    font-family: 'Noto Serif SC', 'Noto Serif JP', sans-serif;
  }

  .language-select:focus {
    outline: none;
    border-color: rgb(255, 123, 0);
    box-shadow: 0 0 5px rgba(255, 123, 0, 0.5);
  }

  .language-select:hover {
    border-color: rgb(255, 123, 0);
  }

  .language-select option {
    background-color: #fff;
    color: #333;
    font-family: 'Noto Serif SC', 'Noto Serif JP', sans-serif;
  }
</style>